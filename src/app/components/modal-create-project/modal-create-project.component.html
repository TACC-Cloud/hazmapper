<h4> Create a new Map </h4>

<tabset>
    <tab heading="Standard">
        <form [formGroup]="projCreateForm" (ngSubmit)="submit()">
            <label> Name:
                <input type="text" formControlName="name" required="true">
            </label>

            <label> Description
                <textarea formControlName="description" required="true"></textarea>
            </label>

            <div class="link-project">
              <label>
                <span style="padding-right: 10px">Export Project</span>
                <input formControlName="exportProject" type="checkbox">
              </label>

            </div>
            <div *ngIf="projCreateForm.get('exportProject').value">
              <app-file-browser
                [single]=true
                [allowFolders]=true
                [allowedExtensions]=[]
                [onlyFolder]=true
                [showPublicSystems]=false
                [heading]="'Select Export Location'"
                [helpText]="'If no folder is selected, the file will be exported to the root of the selected system.' +
                         'If you select a project, you can link the current map to the project.'"
                (selection)="onSelect($event)"
                (systemSelection)="onSystemSelect($event)">
              </app-file-browser>

              <div class="confirm-checkbox">
                <label>
                  <span [ngClass]="{dimmed: linkCheckbox.disabled}">Link Project</span>
                  <input #linkCheckbox type="checkbox"
                         formControlName="linkProject">
                </label>
                <div *ngIf="linkCheckbox.disabled">
                  <small><em>Must be in a project folder to link!</em></small>
                </div>
              </div>
            </div>
            <div class="button-group small">
                <button class="button small warning" type="button" (click)="close()">Close</button>
                <button class="button small align-right" type="submit" [disabled]="(!projCreateForm.valid || submitting)">Submit</button>
            </div>
        </form>
    </tab>
    <tab heading="From Designsafe project / RApp">
        <app-file-browser
          [showPublicSystems]="false"
          [onlyFolder]="true"
          [single]="true"
          [heading]="'Select a RApp Folder'"
          [allowedExtensions]="allowedExtensions"
          [helpText]="'All files inside this folder (that can be) will be imported. ' +
           'This folder will also be periodically scraped for new data.' +
           'A project link will be created with the project of this folder.'"
          (selection)="onFolderSelection($event)"
        >
        </app-file-browser>
        <div *ngIf="errorMessage"> <span class="label warning"> {{ errorMessage }} </span> </div>
        <div class="button-group small">
            <button class="button small warning" type="button" (click)="close()">Close</button>
            <button class="button small align-right" type="submit" [disabled]="!rapidFolder" (click)="createRapidProject()">Submit</button>
        </div>
    </tab>
</tabset>
