<h4> Create a new Map </h4>

<form [formGroup]="projCreateForm" (ngSubmit)="submit()">
  <div style="display: flex; flex-direction: row">
    <div style="width: 100%; padding: 20px">
      <label> Name:
        <input type="text" formControlName="name" required="true">
      </label>

      <label> Description
        <textarea formControlName="description" required="true"></textarea>
      </label>

      <div class="link-project">
        <label>
          <span style="padding-right: 10px">Save Map Link</span>
          <input formControlName="link" type="checkbox">
        </label>
      </div>

      <div *ngIf="projCreateForm.get('link').value">
        <div style="padding: 20px 0px">
          <label> Custom file name:
            <div style="display: flex; flex-direction: row">
              <input type="text" formControlName="fileName">
              <span style="line-height: 1.5; font-size: 1rem; margin: 5px">.hazmapper</span>
            </div>
          </label>
          <small><em>If a name is not given, file will be saved as the map uuid.</em></small>
        </div>

        <div class="observable-project">
          <label> Sync Options:
            <select formControlName="observeOption">
              <option *ngFor="let option of observeOptions" [ngValue]="option.value">{{option.name}}</option>
            </select>
          </label>
        </div>
      </div>
    </div>

    <div>
      <div *ngIf="projCreateForm.get('link').value">
        <app-file-browser
          [single]=true
          [allowFolders]=true
          [allowedExtensions]=[]
          [onlyFolder]=true
          [showPublicSystems]=false
          [heading]="'Select Link Save Location'"
          [helpText]="'If no folder is selected, the link file will be saved to the root of the selected system.' +
          'If you select a project, you can link the current map to the project.'"
          (selection)="onSelect($event)"
          (currentPath)="setCurrentPath($event)"
          (systemSelection)="onSystemSelect($event)">
        </app-file-browser>


      </div>
    </div>
  </div>

  <div class="button-group small">
    <button class="button small warning" type="button" (click)="close()">Close</button>
    <button class="button small align-right" type="submit" [disabled]="(!projCreateForm.valid || submitting)">Submit</button>
  </div>
</form>
