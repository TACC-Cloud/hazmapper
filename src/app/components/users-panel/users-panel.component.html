<div class="dock-panel">
  <div class="dock-panel-header">
    <span class="dock-panel-title"> Team Members </span>
  </div>

  <div class="dock-panel-content">
    <div>
      <form [formGroup]="addUserForm" (ngSubmit)="addUser()">
        <input type="text" formControlName="username" required="true">
        <button class="button success" type="submit" [disabled]="!addUserForm.valid">Add</button>
      </form>
    </div>
    <h4> Current Members </h4>
    <app-user-row [user]="user" *ngFor="let user of projectUsers"></app-user-row>
    <div class="">
      <h4> Map </h4>
      <h6 id="property-title">Name:</h6>
      <app-edit-name-input
        [inputType]="'text'"
        [currentName]="activeProject.name"
        [errorMessage]="nameErrorMessage"
        [inputError]="nameInputError"
        (nameChange)="changeProjectName($event)"
      >
      </app-edit-name-input>

      <h6 id="property-title">Description:</h6>
      <app-edit-name-input
        [inputType]="'textarea'"
        [currentName]="activeProject.description"
        [errorMessage]="descriptionErrorMessage"
        [inputError]="descriptionInputError"
        (nameChange)="changeProjectDescription($event)"
      >
      </app-edit-name-input>

      <h6 id="property-title">Public Access</h6>

      <div *ngIf="activeProject.public" class="public-status-container">
        <span class="public-status-message"> This map can be viewed by anyone with this link:</span>
        <a  [href]="getPublicUrl()" target="_blank">
          {{getPublicUrl()}}
        </a>
        <span *ngIf="this.publicStatusChangingError" class="label alert"> Unable to make map private. </span>
        <button class="button hollow right" [disabled]="this.publicStatusChanging" (click)=updateMapPublicAccess(false)>
          <i class="fas fa-lock"></i>  Make map private
        </button>
      </div>
      <div *ngIf="!activeProject.public" class="public-status-container">
        <span class="public-status-message">This map is private and can only be viewed by team members.</span>
        <span *ngIf="this.publicStatusChangingError" class="label alert"> Unable to make map public. </span>
        <button class="button hollow right" [disabled]="this.publicStatusChanging" (click)=updateMapPublicAccess(true)>
          <i class="fas fa-globe"></i>  Make map public
        </button>
      </div>
      <button class="button warning alert hollow" (click)=deleteProject()>
        <i class="fas fa-trash"></i>  Delete map
      </button>
    </div>
  </div>
</div>
